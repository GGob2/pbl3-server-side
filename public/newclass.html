<HTML>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    </head>
    <body>
        <h1>New Class</h1>

        <form action="/newclass" method="post">
            <p>
                <input id="classType" type="text" name="classtTpe" placeholder="class type">
            </p>
            <p>
                <input id="category" type="text" name="category" placeholder="category">
            </p>
            <p>
                <input id="studyAbout" type="text" name="studyAbout" placeholder="class about">
            </p>
            <p>
                <input id="className" type="text" name="className" placeholder="class name">
            </p>
            <p>
                <input id="price" type="text" name="price" placeholder="price">
            </p>
        </form>

        <h2>기본정보 입력</h2>
        <form action="/" method="post"></form>
            <p>
                <input id="grade" type="text" name="grade" placeholder="grade">
            </p>
            <p>
                <input id="class_desc" type="text" name="desc" placeholder="description">
            </p>
        </form>

        <h2>커리큘럼 추가</h2>
        <form action="/" method="post">
            <p>
                <input id="course_desc" type="text" name="desc" placeholder="desc">
            </p>
            <p>
                <input id="link" type="text" name="link" placeholder="link">
            </p>
        </form>

        <h2>강의시간 추가</h2>
        <form action="/" method="post">
            <p>
                <input id="day" type="text" name="startAt" placeholder="startAt">
            </p>
            <p>
                <input id="start" type="text" name="start" placeholder="start">
            </p>
            <p>
                <input id="finish" type="text" name="finish" placeholder="finish">
            </p>
        </form>

        <h2>최대 튜티수 설정</h2>
        <form action="/" method="post">
            <p>
                <input id="maxTutee" type="text" name="maxTutee" placeholder="maxTutee">
            </p>
        </form>


        <h2>수업장소 추가</h2>
        <form action="/" method="post">
            <p>
                <input id="place"" type="text" name="place" placeholder="place">
            </p>
        </form>

        <h2>스카이프 링크 추가</h2>
        <form action="/" method="post">
            <p>
                <input id="skypeLink" type="text" name="skypeLink" placeholder="skypeLink">
            </p>
        </form>

        <div id="btn_submit">생성!</div>

        <script>
            $('#btn_submit').click(()=>{
                
                //기본정보
                var URI_basicinfo = ''
                if($('#grade').val() != ''){
                    URI_basicinfo = '&grade=' + $('#grade').val() + '&class_description=' + $('#class_desc').val()
                }

                //커리큘럼
                var URI_Course = ''
                if($('#course_desc').val() != ''){
                    URI_Course = '&course_description=' + $('#course_desc').val() + '&course_link=' + $('#link').val()
                }
                
                //수업시간
                var URI_Time = ''
                if($('#day').val()  != ''){
                    URI_Time = '&time_day=' + $('#day').val() + '&time_start=' + $('#start').val() + '&time_finish=' + $('#finish').val()
                }

                //최대튜티수
                var URI_MaxTutee = ''
                if($('#maxTutee').val() != ''){
                    URI_MaxTutee = '&maxTutee=' + $('#maxTutee').val()
                }

                //수업장소
                var URI_place = ''
                if($('#place').val() != ''){
                    URI_place = '&place=' + $('#place').val()
                }

                //스카이프 링크
                var URI_skypelink = ''
                if($('#skypeLink').val() != ''){
                    URI_skypelink = '&skypeLink=' + $('#skypeLink').val()
                }

                let data = 'classType=' + $('#classType').val() + 
                '&category=' + $('#category').val() + 
                '&studyAbout=' + $('#studyAbout').val() + 
                '&className=' + $('#className').val() + 
                '&price=' + $('#price').val();
                data = data + URI_basicinfo + URI_Course + URI_Time + URI_MaxTutee + URI_place + URI_skypelink
                
                $.ajax({
                    type: "POST",
                    url: "/class",
                    data: data,
                    dataType: "text",
                    success: (res)=>{
                        console.log(res)
                    },
                    error: (xhr, status, responseTxt)=>{
                        console.log(xhr);
                    }
                })
            })
        </script>
    </body>
    
</HTML>