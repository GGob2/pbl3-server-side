<HTML>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    </head>
    <body>
        <h1>AddClassData</h1>
        <p>
            <input id="id" type="text" name="class name" placeholder="class name">
        </p>
        <div id="changeclassroom_submit">강의실 변경</div>

        <h2>기본정보 입력</h2>
        <form action="/" method="post"></form>
            <p>
                <input id="grade" type="text" name="grade" placeholder="grade">
            </p>
            <p>
                <input id="class_desc" type="text" name="desc" placeholder="description">
            </p>
        </form>
        <div id="basicinfo_submit">submit</div>

        <h2>커리큘럼 추가</h2>
        <form action="/" method="post">
            <p>
                <input id="course_desc" type="text" name="desc" placeholder="desc">
            </p>
            <p>
                <input id="link" type="text" name="link" placeholder="link">
            </p>
        </form>
        <div id="course_submit">submit</div>

        <h2>강의시간 추가</h2>
        <form action="/" method="post">
            <p>
                <input id="startAt" type="text" name="startAt" placeholder="startAt">
            </p>
            <p>
                <input id="duration" type="text" name="lidurationk" placeholder="duration">
            </p>
        </form>
        <div id="lecturetime_submit">submit</div>

        <h2>최대 튜티수 설정</h2>
        <form action="/" method="post">
            <p>
                <input id="maxTutee" type="text" name="maxTutee" placeholder="maxTutee">
            </p>
        </form>
        <div id="maxTutee_submit">submit</div>

        <h2>질문 추가</h2>
        <form action="/" method="post">
            <p>
                <input id="question" type="text" name="question" placeholder="question">
            </p>
        </form>
        <div id="question_submit">submit</div>

        <h2>답변 추가</h2>
        <form action="/" method="post">
            <p>
                <input id="qid"" type="text" name="qid" placeholder="qid">
            </p>
            <p>
                <input id="answer" type="text" name="answer" placeholder="answer">
            </p>
        </form>
        <div id="answer_submit">submit</div>

        <h2>수업장소 추가</h2>
        <form action="/" method="post">
            <p>
                <input id="place"" type="text" name="place" placeholder="place">
            </p>
        </form>

        <div id="test_submit">test submit</div>

        <script>
            var classID;

            $('#changeclassroom_submit').click(()=>{
                let className = $('#id').val();
                $.ajax({
                    type: "GET",
                    url: "/class/name/" + className,
                    dataType: "text",
                    success: (res)=>{
                        let data = JSON.parse(res);
                        classID = data[0]._id;
                        alert('강의실이 ' + data[0].className + ' - ' + classID + '로 변경됬습니다.');
                    },
                    error: (xhr, status, responseTxt)=>{
                        console.log(xhr);
                    }
                })
            })

            $('#test_submit').click(()=>{
                let grade = $('#grade').val();
                let desc = $('#class_desc').val();
                $.ajax({
                    type: "POST",
                    url: "/class/test",
                    data:   "grade=" + grade + 
                            "&class_description=" + desc+

                            "&course_description=" + $('#course_desc').val()+
                            "&course_link=" + $('#link').val()+

                            "&place=" + $('#place').val(),

                    dataType: "text",
                    success: (res)=>{
                        console.log(res);
                    },
                    error: (xhr, status, responseTxt)=>{
                        console.log(xhr);
                    }
                })
            })
        </script>
    </body>
    
</HTML>